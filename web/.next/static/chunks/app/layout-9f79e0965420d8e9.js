(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5074:function(e,t,r){Promise.resolve().then(r.bind(r,346)),Promise.resolve().then(r.bind(r,515)),Promise.resolve().then(r.t.bind(r,5237,23)),Promise.resolve().then(r.t.bind(r,7960,23))},346:function(e,t,r){"use strict";r.d(t,{ThemeProvider:function(){return y}});var n=r(7437),o=r(2265),s=["light","dark"],a="(prefers-color-scheme: dark)",i="undefined"==typeof window,c=o.createContext(void 0),l=e=>o.useContext(c)?e.children:o.createElement(h,{...e}),u=["light","dark"],h=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:n=!0,enableColorScheme:i=!0,storageKey:l="theme",themes:h=u,defaultTheme:y=n?"system":"light",attribute:v="data-theme",value:p,children:w,nonce:S}=e,[b,T]=o.useState(()=>m(l,y)),[O,_]=o.useState(()=>m(l)),E=p?Object.values(p):h,k=o.useCallback(e=>{let t=e;if(!t)return;"system"===e&&n&&(t=g());let o=p?p[t]:t,a=r?f():null,c=document.documentElement;if("class"===v?(c.classList.remove(...E),o&&c.classList.add(o)):o?c.setAttribute(v,o):c.removeAttribute(v),i){let e=s.includes(y)?y:null,r=s.includes(t)?t:e;c.style.colorScheme=r}null==a||a()},[]),x=o.useCallback(e=>{let t="function"==typeof e?e(e):e;T(t);try{localStorage.setItem(l,t)}catch(e){}},[t]),I=o.useCallback(e=>{_(g(e)),"system"===b&&n&&!t&&k("system")},[b,t]);o.useEffect(()=>{let e=window.matchMedia(a);return e.addListener(I),I(e),()=>e.removeListener(I)},[I]),o.useEffect(()=>{let e=e=>{e.key===l&&x(e.newValue||y)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[x]),o.useEffect(()=>{k(null!=t?t:b)},[t,b]);let P=o.useMemo(()=>({theme:b,setTheme:x,forcedTheme:t,resolvedTheme:"system"===b?O:b,themes:n?[...h,"system"]:h,systemTheme:n?O:void 0}),[b,x,t,O,n,h]);return o.createElement(c.Provider,{value:P},o.createElement(d,{forcedTheme:t,disableTransitionOnChange:r,enableSystem:n,enableColorScheme:i,storageKey:l,themes:h,defaultTheme:y,attribute:v,value:p,children:w,attrs:E,nonce:S}),w)},d=o.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:n,enableSystem:i,enableColorScheme:c,defaultTheme:l,value:u,attrs:h,nonce:d}=e,m="system"===l,f="class"===n?"var d=document.documentElement,c=d.classList;".concat("c.remove(".concat(h.map(e=>"'".concat(e,"'")).join(","),")"),";"):"var d=document.documentElement,n='".concat(n,"',s='setAttribute';"),g=c?(s.includes(l)?l:null)?"if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'".concat(l,"'"):"if(e==='light'||e==='dark')d.style.colorScheme=e":"",y=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=u?u[e]:e,a=t?e+"|| ''":"'".concat(o,"'"),i="";return c&&r&&!t&&s.includes(e)&&(i+="d.style.colorScheme = '".concat(e,"';")),"class"===n?t||o?i+="c.add(".concat(a,")"):i+="null":o&&(i+="d[s](n,".concat(a,")")),i},v=t?"!function(){".concat(f).concat(y(t),"}()"):i?"!function(){try{".concat(f,"var e=localStorage.getItem('").concat(r,"');if('system'===e||(!e&&").concat(m,")){var t='").concat(a,"',m=window.matchMedia(t);if(m.media!==t||m.matches){").concat(y("dark"),"}else{").concat(y("light"),"}}else if(e){").concat(u?"var x=".concat(JSON.stringify(u),";"):"").concat(y(u?"x[e]":"e",!0),"}").concat(m?"":"else{"+y(l,!1,!1)+"}").concat(g,"}catch(e){}}()"):"!function(){try{".concat(f,"var e=localStorage.getItem('").concat(r,"');if(e){").concat(u?"var x=".concat(JSON.stringify(u),";"):"").concat(y(u?"x[e]":"e",!0),"}else{").concat(y(l,!1,!1),";}").concat(g,"}catch(t){}}();");return o.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:v}})}),m=(e,t)=>{let r;if(!i){try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t}},f=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},g=e=>(e||(e=window.matchMedia(a)),e.matches?"dark":"light");function y(e){let{children:t,...r}=e;return(0,n.jsx)(l,{...r,children:(0,n.jsx)("div",{className:"transition-[background-color,color] duration-500 ease-out",children:t})})}},3405:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});var n=r(257);class o{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseUrl).concat(e),n={...t,credentials:"include",headers:{"Content-Type":"application/json",...t.headers}};try{let t=await fetch(r,n);if(401===t.status&&!e.includes("/auth/")){await this.refreshToken();let e=await fetch(r,n);if(!e.ok)throw await this.handleError(e);return await e.json()}if(!t.ok)throw await this.handleError(t);if(204===t.status)return{};return await t.json()}catch(e){if(e instanceof Error&&"Failed to fetch"===e.message)throw{error:"Impossible de se connecter au serveur",status:0};throw e}}async handleError(e){try{return{error:(await e.json()).error||e.statusText,status:e.status}}catch(t){return{error:e.statusText||"Une erreur est survenue",status:e.status}}}async refreshToken(){return this.isRefreshing||(this.isRefreshing=!0,this.refreshPromise=(async()=>{try{await fetch("".concat(this.baseUrl,"/auth/refresh?use_cookies=true"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({})})}catch(e){throw window.location.href="/auth/login",e}finally{this.isRefreshing=!1,this.refreshPromise=null}})()),this.refreshPromise}async signup(e){return this.request("/auth/signup?use_cookies=true",{method:"POST",body:JSON.stringify(e)})}async login(e){return this.request("/auth/login?use_cookies=true",{method:"POST",body:JSON.stringify(e)})}async logout(){try{await fetch("".concat(this.baseUrl,"/auth/logout"),{method:"POST",credentials:"include"})}catch(e){}window.location.href="/auth/login"}async forgotPassword(e){return this.request("/auth/forgot-password",{method:"POST",body:JSON.stringify({email:e})})}async getCourses(e){return this.request("/courses",{headers:{"X-Org-ID":e}})}async getCourse(e,t){return this.request("/courses/".concat(t),{headers:{"X-Org-ID":e}})}async getEnrollments(e,t){return this.request("/enrollments".concat(t?"?user_id=".concat(t):""),{headers:{"X-Org-ID":e}})}async enrollInCourse(e,t){return this.request("/courses/".concat(t,"/enroll"),{method:"POST",headers:{"X-Org-ID":e}})}async getProgress(e,t){return this.request("/enrollments/".concat(t,"/progress"),{headers:{"X-Org-ID":e}})}async updateProgress(e,t,r,n){return this.request("/enrollments/".concat(t,"/progress"),{method:"POST",headers:{"X-Org-ID":e},body:JSON.stringify({module_id:r,status:n})})}constructor(e=n.env.NEXT_PUBLIC_API_URL||"http://localhost:8080"){this.isRefreshing=!1,this.refreshPromise=null,this.baseUrl=e}}let s=new o},515:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return i},a:function(){return c}});var n=r(7437),o=r(2265),s=r(3405);let a=(0,o.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,o.useState)(null),[c,l]=(0,o.useState)(null),[u,h]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let e=localStorage.getItem("user"),t=localStorage.getItem("organization");e&&t&&(i(JSON.parse(e)),l(JSON.parse(t))),h(!1)},[]);let d=async e=>{try{let t=await s.x.signup(e),r={id:t.user.id,email:t.user.email,role:t.user.role},n={id:t.organization.id,name:t.organization.name,slug:t.organization.slug};i(r),l(n),localStorage.setItem("user",JSON.stringify(r)),localStorage.setItem("organization",JSON.stringify(n))}catch(e){throw console.error("Signup error:",e),e}},m=async e=>{try{await s.x.login(e);let t={id:"temp",email:e.email,role:"learner"},r={id:e.organization_id,name:"Organization",slug:"org"};i(t),l(r),localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("organization",JSON.stringify(r))}catch(e){throw console.error("Login error:",e),e}},f=async()=>{await s.x.logout(),i(null),l(null),localStorage.removeItem("user"),localStorage.removeItem("organization")};return(0,n.jsx)(a.Provider,{value:{user:r,organization:c,isLoading:u,isAuthenticated:!!r,signup:d,login:m,logout:f},children:t})}function c(){let e=(0,o.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},257:function(e,t,r){"use strict";var n,o;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,n,o=e.exports={};function s(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c=[],l=!1,u=-1;function h(){l&&n&&(l=!1,n.length?c=n.concat(c):u=-1,c.length&&d())}function d(){if(!l){var e=i(h);l=!0;for(var t=c.length;t;){for(n=c,c=[];++u<t;)n&&n[u].run();u=-1,t=c.length}n=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function f(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new m(e,t)),1!==c.length||l||i(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=f,o.addListener=f,o.once=f,o.off=f,o.removeListener=f,o.removeAllListeners=f,o.emit=f,o.prependListener=f,o.prependOnceListener=f,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var s=r[e]={exports:{}},a=!0;try{t[e](s,s.exports,n),a=!1}finally{a&&delete r[e]}return s.exports}n.ab="//";var o=n(229);e.exports=o}()},7960:function(){},5237:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3",variable:"__variable_f367f3"}}},function(e){e.O(0,[153,971,117,744],function(){return e(e.s=5074)}),_N_E=e.O()}]);