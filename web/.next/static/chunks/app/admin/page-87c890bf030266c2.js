(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{3866:function(e,s,t){Promise.resolve().then(t.bind(t,2603))},2603:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return J}});var l=t(7437),a=t(2265),r=t(9376),i=t(3405),n=t(515),d=t(7915),o=t(2869),c=t(5186),u=t(6070),m=t(1967),x=t(4508);let h=m.fC,p=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)(m.aV,{ref:s,className:(0,x.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a})});p.displayName=m.aV.displayName;let b=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)(m.xz,{ref:s,className:(0,x.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a})});b.displayName=m.xz.displayName;let g=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)(m.VY,{ref:s,className:(0,x.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a})});g.displayName=m.VY.displayName;var v=t(8420),f=t(2660),j=t(3468),N=t(1769),y=t(5805),w=t(8124),C=t(9277),_=t(4286),z=t(5900),S=t(6937),I=t(1596),Z=t(7806),k=t(8156);let O="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-60",A=[{value:"video",label:"Vid\xe9o"},{value:"article",label:"Article"},{value:"pdf",label:"PDF"},{value:"quiz",label:"Quiz"},{value:"scorm",label:"SCORM"}],M=()=>({title:"",slug:"",description:"",tags:"",duration_hours:"",level:"beginner",visibility:"private",metadata:""}),D=()=>{var e,s;return{title:"",module_type:null!==(s=null===(e=A[0])||void 0===e?void 0:e.value)&&void 0!==s?s:"video",content_id:"",duration_seconds:"",data:""}},E={email:"",password:"",role:"learner"},R={name:"",description:""},U={name:"",mime_type:"",metadata:""},P={course_id:"",user_id:"",group_id:"",metadata:""},Y={name:"",slug:"",settings:""};function q(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\s-]/g,"").trim().replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase()}function L(e){if(e.trim())try{return JSON.parse(e)}catch(e){throw Error("Le JSON fourni est invalide")}}async function T(e,s,t){if("undefined"!=typeof XMLHttpRequest)return new Promise((l,a)=>{let r=new XMLHttpRequest;r.open("PUT",e,!0),r.setRequestHeader("Content-Type",s.type||"application/octet-stream"),r.upload.onprogress=e=>{e.lengthComputable&&t(Math.round(e.loaded/e.total*100))},r.onload=()=>{r.status>=200&&r.status<300?(t(100),l()):a(Error("Le t\xe9l\xe9versement a \xe9chou\xe9"))},r.onerror=()=>{a(Error("Impossible de t\xe9l\xe9verser le fichier"))},r.send(s)});if(t(0),!(await fetch(e,{method:"PUT",headers:{"Content-Type":s.type||"application/octet-stream"},body:s})).ok)throw Error("Le t\xe9l\xe9versement a \xe9chou\xe9");t(100)}function J(){let e=(0,r.useRouter)(),{user:s,organization:t,isLoading:m,isAuthenticated:x}=(0,n.a)(),[J,V]=(0,a.useState)(!0),[G,W]=(0,a.useState)(!1),[F,H]=(0,a.useState)("overview"),[B,X]=(0,a.useState)(null),[Q,$]=(0,a.useState)(null),[K,ee]=(0,a.useState)([]),[es,et]=(0,a.useState)([]),[el,ea]=(0,a.useState)([]),[er,ei]=(0,a.useState)([]),[en,ed]=(0,a.useState)([]),[eo,ec]=(0,a.useState)([]),[eu,em]=(0,a.useState)([]),[ex,eh]=(0,a.useState)(null),[ep,eb]=(0,a.useState)(null),[eg,ev]=(0,a.useState)(null),[ef,ej]=(0,a.useState)(M()),[eN,ey]=(0,a.useState)(D()),[ew,eC]=(0,a.useState)(D()),[e_,ez]=(0,a.useState)(E),[eS,eI]=(0,a.useState)(R),[eZ,ek]=(0,a.useState)(P),[eO,eA]=(0,a.useState)(U),[eM,eD]=(0,a.useState)(Y),[eE,eR]=(0,a.useState)(null),[eU,eP]=(0,a.useState)(0),[eY,eq]=(0,a.useState)(null),[eL,eT]=(0,a.useState)(!1),[eJ,eV]=(0,a.useState)(!1),[eG,eW]=(0,a.useState)(!1),[eF,eH]=(0,a.useState)(!1),[eB,eX]=(0,a.useState)(!1),[eQ,e$]=(0,a.useState)(!1),[eK,e0]=(0,a.useState)(!1),[e2,e5]=(0,a.useState)(!1),e4=(0,a.useMemo)(()=>{var e;return null!==(e=K.find(e=>e.id===ex))&&void 0!==e?e:null},[K,ex]),e6=(0,a.useMemo)(()=>{var e;return null!==(e=es.find(e=>e.id===ep))&&void 0!==e?e:null},[es,ep]);(0,a.useEffect)(()=>{if(!m){if(!x){e.replace("/auth");return}t?e9():V(!1)}},[m,x,null==t?void 0:t.id]),(0,a.useEffect)(()=>{if(!t||!ex){et([]),eb(null);return}W(!0),X(null),i.x.listModules(t.id,ex).then(e=>{var s,t;et(e),eb(null!==(t=null===(s=e[0])||void 0===s?void 0:s.id)&&void 0!==t?t:null)}).catch(e=>{console.error(e),X((null==e?void 0:e.error)||"Impossible de charger les modules")}).finally(()=>W(!1))},[t,ex]),(0,a.useEffect)(()=>{var e,s,t;if(!e4){ej(M());return}let l=null!==(e=e4.metadata)&&void 0!==e?e:{},a=Array.isArray(l.tags)?l.tags.join(", "):"",r=l.duration_hours?String(l.duration_hours):"",i=null!==(s=l.level)&&void 0!==s?s:"beginner",n=null!==(t=l.visibility)&&void 0!==t?t:"private";ej({title:e4.title,slug:e4.slug,description:e4.description,tags:a,duration_hours:r,level:i,visibility:n,metadata:JSON.stringify(l,null,2)})},[e4]),(0,a.useEffect)(()=>{var e;if(!e6){ey(e=>({...D(),module_type:e.module_type}));return}ey({title:e6.title,module_type:e6.module_type,content_id:null!==(e=e6.content_id)&&void 0!==e?e:"",duration_seconds:e6.duration_seconds?String(e6.duration_seconds):"",data:e6.data?JSON.stringify(e6.data,null,2):""})},[e6]),(0,a.useEffect)(()=>{var e;if(!eg){eC(D());return}eC({title:eg.title,module_type:eg.module_type,content_id:null!==(e=eg.content_id)&&void 0!==e?e:"",duration_seconds:eg.duration_seconds?String(eg.duration_seconds):"",data:eg.data?JSON.stringify(eg.data,null,2):""})},[eg]);let e1=(0,a.useMemo)(()=>{let e=K.filter(e=>"published"===e.status).length,s=K.length-e;return{publishedCourses:e,draftCourses:s,activeLearners:en.filter(e=>"active"===e.status).length,completedCourses:en.filter(e=>"completed"===e.status).length}},[K,en]),e3=e=>{$(e),setTimeout(()=>$(null),4e3)},e9=async()=>{if(t){V(!0),X(null);try{let[e,l,a,r,n]=await Promise.all([i.x.getCourses(t.id),i.x.listUsers(t.id),i.x.listGroups(t.id),i.x.getEnrollments(t.id),i.x.listContents(t.id)]);if(ee(e),ea(l),ei(a),ed(r),ec(n),e.length>0?eh(e[0].id):eh(null),(null==s?void 0:s.role)==="super_admin"){let e=await i.x.listOrganizations();em(e)}}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible de charger l'espace administrateur")}finally{V(!1)}}},e7=e=>{eh(e.id),H("courses")},e8=async e=>{if(e.preventDefault(),t){eT(!0),X(null);try{var s;let e;let l=null!==(s=L(ef.metadata||""))&&void 0!==s?s:{},a=ef.tags.split(",").map(e=>e.trim()).filter(Boolean);if(a.length&&(l.tags=a),ef.level&&(l.level=ef.level),ef.visibility&&(l.visibility=ef.visibility),ef.duration_hours){let e=Number(ef.duration_hours);Number.isNaN(e)||(l.duration_hours=e)}ex?(e=await i.x.updateCourse(t.id,ex,{title:ef.title,description:ef.description,metadata:l}),ee(s=>s.map(s=>s.id===e.id?e:s))):(e=await i.x.createCourse(t.id,{title:ef.title,slug:ef.slug||q(ef.title),description:ef.description,metadata:l}),ee(s=>[e,...s]),eh(e.id)),e3('Cours "'.concat(e.title,'" enregistr\xe9'))}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible d'enregistrer le cours")}finally{eT(!1)}}},se=async e=>{if(t)try{await i.x.publishCourse(t.id,e),ee(s=>s.map(s=>s.id===e?{...s,status:"published",published_at:new Date().toISOString()}:s)),e3("Cours publi\xe9")}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible de publier le cours")}},ss=async e=>{if(t)try{await i.x.unpublishCourse(t.id,e),ee(s=>s.map(s=>s.id===e?{...s,status:"draft",published_at:null}:s)),e3("Cours d\xe9publi\xe9")}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible de d\xe9publier le cours")}},st=async e=>{if(t)try{await i.x.archiveCourse(t.id,e),ee(s=>s.filter(s=>s.id!==e)),ex===e&&eh(null),e3("Cours archiv\xe9")}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible d'archiver le cours")}},sl=async e=>{if(e.preventDefault(),t&&ex){eV(!0),X(null);try{let e=L(eN.data||""),s=eN.duration_seconds?Number(eN.duration_seconds):void 0,l=await i.x.createModule(t.id,ex,{title:eN.title,module_type:eN.module_type,content_id:eN.content_id||void 0,duration_seconds:s&&!Number.isNaN(s)?s:void 0,data:e});et(e=>[...e,l]),ey(D()),e3('Module "'.concat(l.title,'" cr\xe9\xe9'))}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible d'ajouter le module")}finally{eV(!1)}}},sa=e=>{ev(e)},sr=async e=>{if(e.preventDefault(),t&&eg){eW(!0),X(null);try{let e=L(ew.data||""),s=ew.duration_seconds?Number(ew.duration_seconds):void 0,l=await i.x.updateModule(t.id,eg.id,{title:ew.title,module_type:ew.module_type,content_id:ew.content_id||void 0,duration_seconds:s&&!Number.isNaN(s)?s:void 0,data:e});et(e=>e.map(e=>e.id===l.id?l:e)),ev(null),e3('Module "'.concat(l.title,'" mis \xe0 jour'))}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible de modifier le module")}finally{eW(!1)}}},si=async e=>{if(t)try{await i.x.deleteModule(t.id,e),et(s=>s.filter(s=>s.id!==e)),ep===e&&eb(null),(null==eg?void 0:eg.id)===e&&ev(null),e3("Module supprim\xe9")}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible de supprimer le module")}},sn=async e=>{if(e.preventDefault(),t){eH(!0),X(null);try{let e=await i.x.createUser(t.id,{email:e_.email,password:e_.password,role:e_.role});ea(s=>[e,...s]),ez(E),e3("Utilisateur cr\xe9\xe9")}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible de cr\xe9er l'utilisateur")}finally{eH(!1)}}},sd=async e=>{if(t)try{await i.x.activateUser(t.id,e),ea(s=>s.map(s=>s.id===e?{...s,status:"active"}:s)),e3("Utilisateur activ\xe9")}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible d'activer l'utilisateur")}},so=async e=>{if(t)try{await i.x.deactivateUser(t.id,e),ea(s=>s.map(s=>s.id===e?{...s,status:"inactive"}:s)),e3("Utilisateur d\xe9sactiv\xe9")}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible de d\xe9sactiver l'utilisateur")}},sc=async e=>{if(e.preventDefault(),t){eX(!0),X(null);try{let e=await i.x.createGroup(t.id,{name:eS.name,description:eS.description});ei(s=>[e,...s]),eI(R),e3("Groupe cr\xe9\xe9")}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible de cr\xe9er le groupe")}finally{eX(!1)}}},su=async e=>{if(e.preventDefault(),t){e$(!0),X(null);try{let e=L(eZ.metadata||""),s=await i.x.createEnrollment(t.id,{course_id:eZ.course_id,user_id:eZ.user_id,group_id:eZ.group_id||void 0,metadata:e});ed(e=>[s,...e]),ek(P),e3("Inscription cr\xe9\xe9e")}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible de cr\xe9er l'inscription")}finally{e$(!1)}}},sm=async e=>{if(t)try{await i.x.cancelEnrollment(t.id,e),ed(s=>s.filter(s=>s.id!==e)),e3("Inscription annul\xe9e")}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible d'annuler l'inscription")}},sx=async e=>{if(e.preventDefault(),!t||!eE){X("Merci de s\xe9lectionner un fichier");return}e0(!0),eP(0),X(null);try{let e=L(eO.metadata||""),s=await i.x.createContent(t.id,{name:eO.name||eE.name,mime_type:eO.mime_type||eE.type,size_bytes:eE.size,metadata:e});await T(s.upload_url,eE,eP),await i.x.finalizeContent(t.id,s.content.id,{name:eO.name||eE.name,mime_type:eO.mime_type||eE.type,size_bytes:eE.size,metadata:e});let l=await i.x.listContents(t.id);ec(l),eR(null),eA(U),eq(s.upload_url),e3("Contenu t\xe9l\xe9vers\xe9")}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible de t\xe9l\xe9verser le contenu")}finally{e0(!1),eP(0)}},sh=async e=>{if(t)try{await i.x.archiveContent(t.id,e),ec(s=>s.filter(s=>s.id!==e)),e3("Contenu archiv\xe9")}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible d'archiver le contenu")}},sp=async e=>{e.preventDefault(),e5(!0),X(null);try{let e=L(eM.settings||""),s=await i.x.createOrganization({name:eM.name,slug:eM.slug||q(eM.name),settings:e});em(e=>[s,...e]),eD(Y),e3("Organisation ".concat(s.name," cr\xe9\xe9e"))}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible de cr\xe9er l'organisation")}finally{e5(!1)}},sb=async e=>{try{await i.x.activateOrganization(e),em(s=>s.map(s=>s.id===e?{...s,status:"active"}:s)),e3("Organisation activ\xe9e")}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible d'activer l'organisation")}},sg=async e=>{try{await i.x.archiveOrganization(e),em(s=>s.filter(s=>s.id!==e)),e3("Organisation archiv\xe9e")}catch(e){console.error(e),X((null==e?void 0:e.error)||"Impossible d'archiver l'organisation")}};return m||J?(0,l.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,l.jsx)(d.W,{}),(0,l.jsx)("div",{className:"flex min-h-screen items-center justify-center pt-24",children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-3 rounded-2xl border border-slate-200 bg-white px-8 py-10 text-center shadow-sm",children:[(0,l.jsx)("div",{className:"h-12 w-12 animate-spin rounded-full border-2 border-blue-500 border-t-transparent"}),(0,l.jsx)("p",{className:"text-sm text-slate-600",children:"Chargement de l'espace administrateur…"})]})})]}):s&&t?(0,l.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,l.jsx)(d.W,{}),(0,l.jsxs)("main",{className:"mx-auto flex w-full max-w-6xl flex-col gap-6 px-4 pb-16 pt-24 sm:px-6 lg:px-8",children:[(0,l.jsxs)("header",{className:"flex flex-col gap-6 rounded-2xl border border-slate-200 bg-white px-6 py-6 shadow-sm lg:flex-row lg:items-center lg:justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"flex h-14 w-14 items-center justify-center rounded-xl bg-blue-600 text-white shadow-sm",children:(0,l.jsx)(v.Z,{className:"h-7 w-7"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Administration"}),(0,l.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:t.name}),(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Pilotez vos cours, utilisateurs et contenus depuis un espace centralis\xe9."})]})]}),(0,l.jsxs)(o.z,{type:"button",variant:"outline",className:"flex items-center gap-2 border-slate-200 text-sm text-slate-600",onClick:()=>e.push("/learn"),children:[(0,l.jsx)(f.Z,{className:"h-4 w-4"})," Retour Learn"]})]}),(B||Q)&&(0,l.jsxs)("div",{className:"space-y-2",children:[B&&(0,l.jsx)("div",{className:"rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:B}),Q&&(0,l.jsx)("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700",children:Q})]}),(0,l.jsxs)(h,{value:F,onValueChange:H,className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,l.jsxs)(p,{className:"grid grid-cols-2 gap-2 md:grid-cols-4 lg:grid-cols-6",children:[(0,l.jsxs)(b,{value:"overview",className:"flex items-center justify-center gap-2 rounded-lg px-3 py-2 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-slate-900",children:[(0,l.jsx)(j.Z,{className:"h-4 w-4"})," Aper\xe7u"]}),(0,l.jsxs)(b,{value:"courses",className:"flex items-center justify-center gap-2 rounded-lg px-3 py-2 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-slate-900",children:[(0,l.jsx)(N.Z,{className:"h-4 w-4"})," Cours"]}),(0,l.jsxs)(b,{value:"learners",className:"flex items-center justify-center gap-2 rounded-lg px-3 py-2 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-slate-900",children:[(0,l.jsx)(y.Z,{className:"h-4 w-4"})," Utilisateurs"]}),(0,l.jsxs)(b,{value:"enrollments",className:"flex items-center justify-center gap-2 rounded-lg px-3 py-2 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-slate-900",children:[(0,l.jsx)(w.Z,{className:"h-4 w-4"})," Inscriptions"]}),(0,l.jsxs)(b,{value:"content",className:"flex items-center justify-center gap-2 rounded-lg px-3 py-2 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-slate-900",children:[(0,l.jsx)(C.Z,{className:"h-4 w-4"})," Contenus"]}),"super_admin"===s.role&&(0,l.jsxs)(b,{value:"organizations",className:"flex items-center justify-center gap-2 rounded-lg px-3 py-2 text-sm font-medium data-[state=active]:bg-white data-[state=active]:text-slate-900",children:[(0,l.jsx)(_.Z,{className:"h-4 w-4"})," Organisations"]})]}),(0,l.jsxs)(g,{value:"overview",className:"mt-6 space-y-6",children:[(0,l.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,l.jsxs)(u.Zb,{className:"border border-slate-200 bg-slate-50/80 shadow-sm",children:[(0,l.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(u.ll,{className:"text-sm font-medium text-slate-600",children:"Cours publi\xe9s"}),(0,l.jsx)(z.Z,{className:"h-4 w-4 text-blue-500"})]}),(0,l.jsx)(u.aY,{children:(0,l.jsx)("p",{className:"text-2xl font-semibold text-slate-900",children:e1.publishedCourses})})]}),(0,l.jsxs)(u.Zb,{className:"border border-slate-200 bg-slate-50/80 shadow-sm",children:[(0,l.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(u.ll,{className:"text-sm font-medium text-slate-600",children:"Cours brouillons"}),(0,l.jsx)(S.Z,{className:"h-4 w-4 text-blue-500"})]}),(0,l.jsx)(u.aY,{children:(0,l.jsx)("p",{className:"text-2xl font-semibold text-slate-900",children:e1.draftCourses})})]}),(0,l.jsxs)(u.Zb,{className:"border border-slate-200 bg-slate-50/80 shadow-sm",children:[(0,l.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(u.ll,{className:"text-sm font-medium text-slate-600",children:"Apprenants actifs"}),(0,l.jsx)(y.Z,{className:"h-4 w-4 text-blue-500"})]}),(0,l.jsx)(u.aY,{children:(0,l.jsx)("p",{className:"text-2xl font-semibold text-slate-900",children:e1.activeLearners})})]}),(0,l.jsxs)(u.Zb,{className:"border border-slate-200 bg-slate-50/80 shadow-sm",children:[(0,l.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(u.ll,{className:"text-sm font-medium text-slate-600",children:"Cours termin\xe9s"}),(0,l.jsx)(I.Z,{className:"h-4 w-4 text-blue-500"})]}),(0,l.jsx)(u.aY,{children:(0,l.jsx)("p",{className:"text-2xl font-semibold text-slate-900",children:e1.completedCourses})})]})]}),(0,l.jsxs)(u.Zb,{className:"border border-slate-200 bg-slate-50/80 shadow-sm",children:[(0,l.jsx)(u.Ol,{children:(0,l.jsx)(u.ll,{className:"text-lg text-slate-900",children:"Activit\xe9 r\xe9cente"})}),(0,l.jsxs)(u.aY,{className:"space-y-3 text-sm text-slate-600",children:[K.slice(0,5).map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-lg border border-slate-200 bg-white px-4 py-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-slate-900",children:e.title}),(0,l.jsx)("p",{className:"text-xs text-slate-500",children:"published"===e.status?"Publi\xe9":"Brouillon"})]}),(0,l.jsx)(o.z,{type:"button",variant:"outline",size:"sm",className:"border-slate-200 text-xs",onClick:()=>e7(e),children:"Ouvrir"})]},e.id)),0===K.length&&(0,l.jsx)("p",{children:"Aucun cours pour le moment. Cr\xe9ez votre premier programme."})]})]})]}),(0,l.jsxs)(g,{value:"courses",className:"mt-6 space-y-6",children:[(0,l.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1.2fr,1.8fr]",children:[(0,l.jsxs)(u.Zb,{className:"border border-slate-200 bg-white shadow-sm",children:[(0,l.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between",children:[(0,l.jsxs)(u.ll,{className:"flex items-center gap-2 text-lg text-slate-900",children:[(0,l.jsx)(N.Z,{className:"h-5 w-5 text-blue-500"})," Catalogue"]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(o.z,{type:"button",onClick:()=>e.push("/admin/courses/new"+(t?"?org=".concat(t.id):"")),className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700",children:[(0,l.jsx)(S.Z,{className:"mr-2 h-4 w-4"})," Assistant guid\xe9"]}),(0,l.jsx)(o.z,{type:"button",variant:"outline",onClick:()=>{eh(null),et([]),ev(null),ey(D()),ej(M())},className:"border-slate-200",children:"Cr\xe9ation rapide"})]})]}),(0,l.jsxs)(u.aY,{className:"space-y-3",children:[K.map(e=>(0,l.jsx)("div",{className:"rounded-xl border px-4 py-3 transition-colors ".concat(ex===e.id?"border-blue-500/40 bg-blue-50":"border-slate-200 bg-slate-50 hover:border-blue-400/40 hover:bg-blue-50"),children:(0,l.jsxs)("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:e.title}),(0,l.jsx)("p",{className:"text-xs text-slate-500",children:e.description||"Pas de description"})]}),(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[(0,l.jsx)("span",{className:"rounded-full bg-white px-3 py-1 text-slate-600",children:e.status}),(0,l.jsx)(o.z,{variant:"outline",size:"sm",className:"border-slate-200",onClick:()=>e7(e),children:"Modifier"}),"published"===e.status?(0,l.jsx)(o.z,{variant:"outline",size:"sm",className:"border-slate-200",onClick:()=>ss(e.id),children:"D\xe9publier"}):(0,l.jsx)(o.z,{size:"sm",className:"bg-blue-600 text-white hover:bg-blue-700",onClick:()=>se(e.id),children:"Publier"}),(0,l.jsx)(o.z,{variant:"outline",size:"sm",className:"border-red-200 text-red-600 hover:bg-red-50",onClick:()=>st(e.id),children:"Archiver"})]})]})},e.id)),0===K.length&&(0,l.jsx)("div",{className:"rounded-xl border border-dashed border-slate-300 bg-slate-50 px-4 py-6 text-center text-sm text-slate-500",children:"Aucun cours disponible. Lancez-vous en cr\xe9ant un nouveau programme."})]})]}),(0,l.jsxs)(u.Zb,{className:"border border-slate-200 bg-white shadow-sm",children:[(0,l.jsx)(u.Ol,{children:(0,l.jsx)(u.ll,{className:"text-lg text-slate-900",children:e4?"Modifier le cours : ".concat(e4.title):"Cr\xe9er un cours"})}),(0,l.jsx)(u.aY,{children:(0,l.jsxs)("form",{className:"space-y-4",onSubmit:e8,children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Titre"}),(0,l.jsx)(c.I,{required:!0,value:ef.title,onChange:e=>ej(s=>({...s,title:e.target.value}))})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Slug"}),(0,l.jsx)(c.I,{value:ef.slug,onChange:e=>ej(s=>({...s,slug:e.target.value})),placeholder:"automatique si vide"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Description"}),(0,l.jsx)("textarea",{className:O,rows:3,value:ef.description,onChange:e=>ej(s=>({...s,description:e.target.value}))})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Tags"}),(0,l.jsx)(c.I,{value:ef.tags,onChange:e=>ej(s=>({...s,tags:e.target.value})),placeholder:"s\xe9par\xe9s par une virgule"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Dur\xe9e (heures)"}),(0,l.jsx)(c.I,{value:ef.duration_hours,onChange:e=>ej(s=>({...s,duration_hours:e.target.value})),placeholder:"ex: 12"})]})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Niveau"}),(0,l.jsxs)("select",{className:O,value:ef.level,onChange:e=>ej(s=>({...s,level:e.target.value})),children:[(0,l.jsx)("option",{value:"beginner",children:"D\xe9butant"}),(0,l.jsx)("option",{value:"intermediate",children:"Interm\xe9diaire"}),(0,l.jsx)("option",{value:"advanced",children:"Avanc\xe9"})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"Visibilit\xe9"}),(0,l.jsxs)("select",{className:O,value:ef.visibility,onChange:e=>ej(s=>({...s,visibility:e.target.value})),children:[(0,l.jsx)("option",{value:"private",children:"Priv\xe9"}),(0,l.jsx)("option",{value:"public",children:"Public"}),(0,l.jsx)("option",{value:"restricted",children:"Restreint"})]})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium text-slate-600",children:"M\xe9tadonn\xe9es (JSON)"}),(0,l.jsx)("textarea",{className:O,rows:5,value:ef.metadata,onChange:e=>ej(s=>({...s,metadata:e.target.value})),placeholder:'{\n  "lang": "fr"\n}'})]}),(0,l.jsx)(o.z,{type:"submit",className:"w-full bg-blue-600 text-white hover:bg-blue-700",disabled:eL,children:eL?"Enregistrement…":"Enregistrer"})]})})]})]}),(0,l.jsxs)(u.Zb,{className:"border border-slate-200 bg-white shadow-sm",children:[(0,l.jsx)(u.Ol,{children:(0,l.jsxs)(u.ll,{className:"flex items-center gap-2 text-lg text-slate-900",children:[(0,l.jsx)(C.Z,{className:"h-5 w-5 text-blue-500"})," Modules du cours"]})}),(0,l.jsx)(u.aY,{className:"space-y-6",children:(0,l.jsxs)("div",{className:"grid gap-4 lg:grid-cols-[1.3fr,1.7fr]",children:[(0,l.jsxs)("div",{className:"space-y-3",children:[G&&(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Chargement des modules…"}),!G&&0===es.length&&(0,l.jsx)("div",{className:"rounded-lg border border-dashed border-slate-300 bg-slate-50 px-4 py-6 text-center text-sm text-slate-500",children:"Aucun module pour ce cours. Ajoutez votre premier module via le formulaire."}),es.map(e=>(0,l.jsx)("div",{className:"rounded-lg border px-4 py-3 transition-colors ".concat(ep===e.id?"border-blue-500/40 bg-blue-50":"border-slate-200 bg-slate-50 hover:border-blue-400/40 hover:bg-blue-50"),children:(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:e.title}),(0,l.jsx)("span",{className:"text-xs capitalize text-slate-500",children:e.module_type})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs",children:[(0,l.jsx)(o.z,{type:"button",size:"sm",variant:"outline",className:"border-slate-200",onClick:()=>{eb(e.id),sa(e)},children:"\xc9diter"}),(0,l.jsx)(o.z,{type:"button",size:"sm",variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50",onClick:()=>si(e.id),children:"Supprimer"})]})]})},e.id))]}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("form",{className:"space-y-4 rounded-xl border border-slate-200 bg-slate-50 px-4 py-4",onSubmit:sl,children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-slate-700",children:"Ajouter un module"}),(0,l.jsx)(c.I,{required:!0,placeholder:"Titre du module",value:eN.title,onChange:e=>ey(s=>({...s,title:e.target.value}))}),(0,l.jsx)("select",{className:O,value:eN.module_type,onChange:e=>ey(s=>({...s,module_type:e.target.value})),children:A.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,l.jsx)(c.I,{placeholder:"Identifiant contenu (optionnel)",value:eN.content_id,onChange:e=>ey(s=>({...s,content_id:e.target.value}))}),(0,l.jsx)(c.I,{placeholder:"Dur\xe9e en secondes",value:eN.duration_seconds,onChange:e=>ey(s=>({...s,duration_seconds:e.target.value}))}),(0,l.jsx)("textarea",{className:O,rows:3,placeholder:"M\xe9tadonn\xe9es JSON",value:eN.data,onChange:e=>ey(s=>({...s,data:e.target.value}))}),(0,l.jsx)(o.z,{type:"submit",className:"w-full bg-blue-600 text-white hover:bg-blue-700",disabled:eJ,children:eJ?"Ajout…":"Ajouter le module"})]}),eg&&(0,l.jsxs)("form",{className:"space-y-4 rounded-xl border border-blue-200 bg-blue-50 px-4 py-4",onSubmit:sr,children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-blue-700",children:"Modifier le module"}),(0,l.jsx)(o.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{ev(null)},children:"Annuler"})]}),(0,l.jsx)(c.I,{required:!0,value:ew.title,onChange:e=>eC(s=>({...s,title:e.target.value}))}),(0,l.jsx)("select",{className:O,value:ew.module_type,onChange:e=>eC(s=>({...s,module_type:e.target.value})),children:A.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,l.jsx)(c.I,{value:ew.content_id,onChange:e=>eC(s=>({...s,content_id:e.target.value})),placeholder:"Identifiant contenu"}),(0,l.jsx)(c.I,{value:ew.duration_seconds,onChange:e=>eC(s=>({...s,duration_seconds:e.target.value})),placeholder:"Dur\xe9e en secondes"}),(0,l.jsx)("textarea",{className:O,rows:3,value:ew.data,onChange:e=>eC(s=>({...s,data:e.target.value}))}),(0,l.jsx)(o.z,{type:"submit",className:"w-full bg-blue-600 text-white hover:bg-blue-700",disabled:eG,children:eG?"Mise \xe0 jour…":"Mettre \xe0 jour"})]})]})]})})]})]}),(0,l.jsxs)(g,{value:"learners",className:"mt-6 space-y-6",children:[(0,l.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1.1fr,1.9fr]",children:[(0,l.jsxs)(u.Zb,{className:"border border-slate-200 bg-white shadow-sm",children:[(0,l.jsx)(u.Ol,{children:(0,l.jsxs)(u.ll,{className:"flex items-center gap-2 text-lg text-slate-900",children:[(0,l.jsx)(Z.Z,{className:"h-5 w-5 text-blue-500"})," Nouvel utilisateur"]})}),(0,l.jsx)(u.aY,{children:(0,l.jsxs)("form",{className:"space-y-4",onSubmit:sn,children:[(0,l.jsx)(c.I,{required:!0,type:"email",placeholder:"email@exemple.com",value:e_.email,onChange:e=>ez(s=>({...s,email:e.target.value}))}),(0,l.jsx)(c.I,{required:!0,type:"password",placeholder:"Mot de passe temporaire",value:e_.password,onChange:e=>ez(s=>({...s,password:e.target.value}))}),(0,l.jsxs)("select",{className:O,value:e_.role,onChange:e=>ez(s=>({...s,role:e.target.value})),children:[(0,l.jsx)("option",{value:"learner",children:"Apprenant"}),(0,l.jsx)("option",{value:"manager",children:"Manager"}),(0,l.jsx)("option",{value:"admin",children:"Admin"})]}),(0,l.jsx)(o.z,{type:"submit",className:"w-full bg-blue-600 text-white hover:bg-blue-700",disabled:eF,children:eF?"Cr\xe9ation…":"Cr\xe9er l'utilisateur"})]})})]}),(0,l.jsxs)(u.Zb,{className:"border border-slate-200 bg-white shadow-sm",children:[(0,l.jsx)(u.Ol,{children:(0,l.jsx)(u.ll,{className:"text-lg text-slate-900",children:"Utilisateurs"})}),(0,l.jsxs)(u.aY,{className:"space-y-4",children:[el.map(e=>(0,l.jsxs)("div",{className:"flex flex-col gap-2 rounded-lg border border-slate-200 bg-slate-50 px-4 py-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:e.email}),(0,l.jsxs)("p",{className:"text-xs text-slate-500",children:[e.role," • ",e.status]})]}),(0,l.jsx)("div",{className:"flex gap-2 text-xs",children:"active"===e.status?(0,l.jsx)(o.z,{type:"button",size:"sm",variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50",onClick:()=>so(e.id),children:"D\xe9sactiver"}):(0,l.jsx)(o.z,{type:"button",size:"sm",variant:"outline",className:"border-slate-200",onClick:()=>sd(e.id),children:"Activer"})})]},e.id)),0===el.length&&(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Aucun utilisateur pour le moment."})]})]})]}),(0,l.jsxs)(u.Zb,{className:"border border-slate-200 bg-white shadow-sm",children:[(0,l.jsx)(u.Ol,{children:(0,l.jsxs)(u.ll,{className:"flex items-center gap-2 text-lg text-slate-900",children:[(0,l.jsx)(y.Z,{className:"h-5 w-5 text-blue-500"})," Groupes"]})}),(0,l.jsxs)(u.aY,{className:"grid gap-6 lg:grid-cols-[1.1fr,1.9fr]",children:[(0,l.jsxs)("form",{className:"space-y-4",onSubmit:sc,children:[(0,l.jsx)(c.I,{required:!0,placeholder:"Nom du groupe",value:eS.name,onChange:e=>eI(s=>({...s,name:e.target.value}))}),(0,l.jsx)("textarea",{className:O,rows:3,placeholder:"Description",value:eS.description,onChange:e=>eI(s=>({...s,description:e.target.value}))}),(0,l.jsx)(o.z,{type:"submit",className:"w-full bg-blue-600 text-white hover:bg-blue-700",disabled:eB,children:eB?"Cr\xe9ation…":"Cr\xe9er le groupe"})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[er.map(e=>(0,l.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-4 py-3",children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:e.name}),(0,l.jsx)("p",{className:"text-xs text-slate-500",children:e.description||"Pas de description"})]},e.id)),0===er.length&&(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Aucun groupe enregistr\xe9."})]})]})]})]}),(0,l.jsx)(g,{value:"enrollments",className:"mt-6 space-y-6",children:(0,l.jsxs)(u.Zb,{className:"border border-slate-200 bg-white shadow-sm",children:[(0,l.jsx)(u.Ol,{children:(0,l.jsxs)(u.ll,{className:"flex items-center gap-2 text-lg text-slate-900",children:[(0,l.jsx)(w.Z,{className:"h-5 w-5 text-blue-500"})," G\xe9rer les inscriptions"]})}),(0,l.jsxs)(u.aY,{className:"grid gap-6 lg:grid-cols-[1.1fr,1.9fr]",children:[(0,l.jsxs)("form",{className:"space-y-4",onSubmit:su,children:[(0,l.jsxs)("select",{className:O,required:!0,value:eZ.course_id,onChange:e=>ek(s=>({...s,course_id:e.target.value})),children:[(0,l.jsx)("option",{value:"",children:"S\xe9lectionnez un cours"}),K.map(e=>(0,l.jsx)("option",{value:e.id,children:e.title},e.id))]}),(0,l.jsxs)("select",{className:O,required:!0,value:eZ.user_id,onChange:e=>ek(s=>({...s,user_id:e.target.value})),children:[(0,l.jsx)("option",{value:"",children:"S\xe9lectionnez un utilisateur"}),el.map(e=>(0,l.jsx)("option",{value:e.id,children:e.email},e.id))]}),(0,l.jsxs)("select",{className:O,value:eZ.group_id,onChange:e=>ek(s=>({...s,group_id:e.target.value})),children:[(0,l.jsx)("option",{value:"",children:"Groupe (optionnel)"}),er.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,l.jsx)("textarea",{className:O,rows:3,placeholder:"M\xe9tadonn\xe9es JSON",value:eZ.metadata,onChange:e=>ek(s=>({...s,metadata:e.target.value}))}),(0,l.jsx)(o.z,{type:"submit",className:"w-full bg-blue-600 text-white hover:bg-blue-700",disabled:eQ,children:eQ?"Cr\xe9ation…":"Cr\xe9er l'inscription"})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[en.map(e=>{var s,t,a;return(0,l.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-4 py-3",children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:(null===(s=K.find(s=>s.id===e.course_id))||void 0===s?void 0:s.title)||"Cours"}),(0,l.jsxs)("p",{className:"text-xs text-slate-500",children:[(null===(t=el.find(s=>s.id===e.user_id))||void 0===t?void 0:t.email)||"Utilisateur"," • ",e.status]}),(0,l.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-3 text-xs text-slate-500",children:[(0,l.jsxs)("span",{children:["Progression : ",Math.round(null!==(a=e.progress)&&void 0!==a?a:0),"%"]}),(0,l.jsx)(o.z,{type:"button",size:"sm",variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50",onClick:()=>sm(e.id),children:"Annuler"})]})]},e.id)}),0===en.length&&(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Aucune inscription enregistr\xe9e."})]})]})]})}),(0,l.jsx)(g,{value:"content",className:"mt-6 space-y-6",children:(0,l.jsxs)(u.Zb,{className:"border border-slate-200 bg-white shadow-sm",children:[(0,l.jsx)(u.Ol,{children:(0,l.jsxs)(u.ll,{className:"flex items-center gap-2 text-lg text-slate-900",children:[(0,l.jsx)(k.Z,{className:"h-5 w-5 text-blue-500"})," T\xe9l\xe9verser un contenu"]})}),(0,l.jsxs)(u.aY,{className:"grid gap-6 lg:grid-cols-[1.1fr,1.9fr]",children:[(0,l.jsxs)("form",{className:"space-y-4",onSubmit:sx,children:[(0,l.jsx)(c.I,{placeholder:"Nom",value:eO.name,onChange:e=>eA(s=>({...s,name:e.target.value}))}),(0,l.jsx)(c.I,{placeholder:"Type MIME",value:eO.mime_type,onChange:e=>eA(s=>({...s,mime_type:e.target.value}))}),(0,l.jsx)("input",{type:"file",className:O,onChange:e=>{var s,t;return eR(null!==(t=null===(s=e.target.files)||void 0===s?void 0:s[0])&&void 0!==t?t:null)}}),(0,l.jsx)("textarea",{className:O,rows:3,placeholder:"M\xe9tadonn\xe9es JSON",value:eO.metadata,onChange:e=>eA(s=>({...s,metadata:e.target.value}))}),eU>0&&eU<100&&(0,l.jsx)("div",{className:"h-2 w-full overflow-hidden rounded-full bg-slate-200",children:(0,l.jsx)("div",{className:"h-full bg-blue-500",style:{width:"".concat(eU,"%")}})}),(0,l.jsx)(o.z,{type:"submit",className:"w-full bg-blue-600 text-white hover:bg-blue-700",disabled:eK,children:eK?"T\xe9l\xe9versement…":"T\xe9l\xe9verser"}),eY&&(0,l.jsxs)("p",{className:"text-xs text-slate-500",children:["Lien de t\xe9l\xe9versement g\xe9n\xe9r\xe9 : ",eY]})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[eo.map(e=>(0,l.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-4 py-3",children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:e.name}),(0,l.jsx)("p",{className:"text-xs text-slate-500",children:e.mime_type}),(0,l.jsx)(o.z,{type:"button",size:"sm",variant:"outline",className:"mt-3 border-red-200 text-red-600 hover:bg-red-50",onClick:()=>sh(e.id),children:"Archiver"})]},e.id)),0===eo.length&&(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Aucun contenu t\xe9l\xe9vers\xe9."})]})]})]})}),"super_admin"===s.role&&(0,l.jsx)(g,{value:"organizations",className:"mt-6 space-y-6",children:(0,l.jsxs)(u.Zb,{className:"border border-slate-200 bg-white shadow-sm",children:[(0,l.jsx)(u.Ol,{children:(0,l.jsxs)(u.ll,{className:"flex items-center gap-2 text-lg text-slate-900",children:[(0,l.jsx)(_.Z,{className:"h-5 w-5 text-blue-500"})," Organisations"]})}),(0,l.jsxs)(u.aY,{className:"grid gap-6 lg:grid-cols-[1.1fr,1.9fr]",children:[(0,l.jsxs)("form",{className:"space-y-4",onSubmit:sp,children:[(0,l.jsx)(c.I,{required:!0,placeholder:"Nom de l'organisation",value:eM.name,onChange:e=>eD(s=>({...s,name:e.target.value}))}),(0,l.jsx)(c.I,{placeholder:"Slug",value:eM.slug,onChange:e=>eD(s=>({...s,slug:e.target.value}))}),(0,l.jsx)("textarea",{className:O,rows:4,placeholder:"Param\xe8tres JSON",value:eM.settings,onChange:e=>eD(s=>({...s,settings:e.target.value}))}),(0,l.jsx)(o.z,{type:"submit",className:"w-full bg-blue-600 text-white hover:bg-blue-700",disabled:e2,children:e2?"Cr\xe9ation…":"Cr\xe9er l'organisation"})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[eu.map(e=>(0,l.jsxs)("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-4 py-3",children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:e.name}),(0,l.jsxs)("p",{className:"text-xs text-slate-500",children:[e.slug," • ",e.status]}),(0,l.jsx)("div",{className:"mt-3 flex gap-2 text-xs",children:"active"===e.status?(0,l.jsx)(o.z,{type:"button",size:"sm",variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50",onClick:()=>sg(e.id),children:"Archiver"}):(0,l.jsx)(o.z,{type:"button",size:"sm",variant:"outline",className:"border-slate-200",onClick:()=>sb(e.id),children:"Activer"})})]},e.id)),0===eu.length&&(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"Aucune organisation disponible."})]})]})]})})]})]})]}):null}},7915:function(e,s,t){"use strict";t.d(s,{W:function(){return p}});var l=t(7437),a=t(7648),r=t(9376),i=t(5900),n=t(5466),d=t(7692),o=t(2489),c=t(8293),u=t(2265),m=t(515),x=t(3405);let h=[{href:"/learn",label:"Formations",icon:i.Z},{href:"/admin",label:"Admin",icon:n.Z,adminOnly:!0}];function p(){var e,s,t;let n=(0,r.usePathname)(),{user:p,organization:b}=(0,m.a)(),[g,v]=(0,u.useState)(!1),f=h.filter(e=>!e.adminOnly||(null==p?void 0:p.role)==="admin"||(null==p?void 0:p.role)==="super_admin"),j=async()=>{await x.x.logout(),window.location.href="/auth"};return(0,l.jsxs)("nav",{className:"fixed inset-x-0 top-0 z-50 border-b border-slate-200 bg-white/90 backdrop-blur",children:[(0,l.jsx)("div",{className:"container-custom",children:(0,l.jsxs)("div",{className:"flex h-16 items-center justify-between gap-4",children:[(0,l.jsxs)(a.default,{href:"/learn",className:"flex items-center gap-3",children:[(0,l.jsx)("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-blue-600 text-white shadow-sm",children:(0,l.jsx)(i.Z,{className:"h-5 w-5",strokeWidth:2.4})}),(0,l.jsxs)("div",{className:"hidden sm:block",children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:"LMS Go"}),(0,l.jsx)("p",{className:"text-xs text-slate-500",children:(null==b?void 0:b.name)||"Learning Platform"})]})]}),(0,l.jsx)("div",{className:"hidden md:flex items-center gap-4",children:(0,l.jsx)("div",{className:"inline-flex items-center gap-1 rounded-full border border-slate-200 bg-slate-100 p-1",children:f.map(e=>{let s=e.icon,t=n.startsWith(e.href);return(0,l.jsxs)(a.default,{href:e.href,className:"flex items-center gap-2 rounded-full px-4 py-1.5 text-sm font-medium transition-colors ".concat(t?"bg-white text-slate-900 shadow-sm":"text-slate-600 hover:text-slate-900"),children:[(0,l.jsx)(s,{className:"h-4 w-4 ".concat(t?"text-blue-600":"text-slate-400")}),(0,l.jsx)("span",{children:e.label})]},e.href)})})}),(0,l.jsxs)("div",{className:"hidden md:flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-3 py-2 shadow-sm",children:[(0,l.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-blue-100 text-sm font-semibold text-blue-700",children:(null==p?void 0:null===(e=p.email)||void 0===e?void 0:e.substring(0,2).toUpperCase())||"U"}),(0,l.jsxs)("div",{className:"text-sm leading-tight",children:[(0,l.jsx)("p",{className:"font-medium text-slate-900",children:null==p?void 0:null===(s=p.email)||void 0===s?void 0:s.split("@")[0]}),(0,l.jsx)("p",{className:"text-xs capitalize text-slate-500",children:(null==p?void 0:p.role)||"User"})]})]}),(0,l.jsxs)("button",{onClick:j,className:"inline-flex items-center gap-2 rounded-lg border border-slate-200 px-3 py-2 text-sm font-medium text-slate-600 transition-colors hover:bg-slate-100 hover:text-slate-900",children:[(0,l.jsx)(d.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"D\xe9connexion"})]})]}),(0,l.jsx)("button",{onClick:()=>v(e=>!e),className:"md:hidden inline-flex h-10 w-10 items-center justify-center rounded-lg border border-slate-200 text-slate-600 transition-colors hover:bg-slate-100","aria-label":"Menu",children:g?(0,l.jsx)(o.Z,{className:"h-5 w-5"}):(0,l.jsx)(c.Z,{className:"h-5 w-5"})})]})}),g&&(0,l.jsx)("div",{className:"md:hidden border-t border-slate-200 bg-white/95 backdrop-blur",children:(0,l.jsxs)("div",{className:"container-custom space-y-4 py-4",children:[(0,l.jsx)("div",{className:"flex flex-col gap-2",children:f.map(e=>{let s=e.icon,t=n.startsWith(e.href);return(0,l.jsxs)(a.default,{href:e.href,onClick:()=>v(!1),className:"flex items-center gap-3 rounded-xl border px-4 py-3 text-sm font-medium transition-colors ".concat(t?"border-blue-500/30 bg-blue-50 text-blue-700":"border-slate-200 bg-white text-slate-600 hover:border-blue-400/40 hover:bg-blue-50 hover:text-blue-700"),children:[(0,l.jsx)(s,{className:"h-5 w-5 ".concat(t?"text-blue-600":"text-slate-400")}),(0,l.jsx)("span",{children:e.label})]},e.href)})}),(0,l.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-100 text-sm font-semibold text-blue-700",children:(null==p?void 0:null===(t=p.email)||void 0===t?void 0:t.substring(0,2).toUpperCase())||"U"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-slate-900",children:null==p?void 0:p.email}),(0,l.jsx)("p",{className:"text-xs capitalize text-slate-500",children:(null==p?void 0:p.role)||"User"})]})]}),(0,l.jsxs)("button",{onClick:j,className:"mt-4 inline-flex w-full items-center justify-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",children:[(0,l.jsx)(d.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"D\xe9connexion"})]})]})]})})]})}},2869:function(e,s,t){"use strict";t.d(s,{z:function(){return o}});var l=t(7437),a=t(2265),r=t(7495),i=t(535),n=t(4508);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,s)=>{let{className:t,variant:a,size:i,asChild:o=!1,...c}=e,u=o?r.g7:"button";return(0,l.jsx)(u,{className:(0,n.cn)(d({variant:a,size:i,className:t})),ref:s,...c})});o.displayName="Button"},6070:function(e,s,t){"use strict";t.d(s,{Ol:function(){return n},SZ:function(){return o},Zb:function(){return i},aY:function(){return c},ll:function(){return d}});var l=t(7437),a=t(2265),r=t(4508);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...a})});n.displayName="CardHeader";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});d.displayName="CardTitle";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",t),...a})});c.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},5186:function(e,s,t){"use strict";t.d(s,{I:function(){return i}});var l=t(7437),a=t(2265),r=t(4508);let i=a.forwardRef((e,s)=>{let{className:t,type:a,...i}=e;return(0,l.jsx)("input",{type:a,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...i})});i.displayName="Input"},4508:function(e,s,t){"use strict";t.d(s,{cn:function(){return r}});var l=t(1994),a=t(3335);function r(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.m6)((0,l.W)(s))}}},function(e){e.O(0,[148,217,261,515,971,117,744],function(){return e(e.s=3866)}),_N_E=e.O()}]);