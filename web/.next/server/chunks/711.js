exports.id=711,exports.ids=[711],exports.modules={6589:(e,t,r)=>{Promise.resolve().then(r.bind(r,5813)),Promise.resolve().then(r.bind(r,1210))},1894:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},5813:(e,t,r)=>{"use strict";r.d(t,{ThemeProvider:()=>n});var s=r(326);r(7577);var o=r(4831);function n({children:e,...t}){return s.jsx(o.f,{...t,children:s.jsx("div",{className:"transition-[background-color,color] duration-500 ease-out",children:e})})}},9341:(e,t,r)=>{"use strict";r.d(t,{x:()=>o});class s{constructor(e="/api"){this.isRefreshing=!1,this.refreshPromise=null,this.baseUrl=e}async request(e,t={}){let r=`${this.baseUrl}${e}`,s={...t,credentials:"include",headers:{"Content-Type":"application/json",...t.headers}};try{let t=await fetch(r,s);if(401===t.status&&!e.includes("/auth/")){await this.refreshToken();let e=await fetch(r,s);if(!e.ok)throw await this.handleError(e);return await e.json()}if(!t.ok)throw await this.handleError(t);if(204===t.status)return{};return await t.json()}catch(e){if(e instanceof Error&&"Failed to fetch"===e.message)throw{error:"Impossible de se connecter au serveur",status:0};throw e}}async handleError(e){try{return{error:(await e.json()).error||e.statusText,status:e.status}}catch{return{error:e.statusText||"Une erreur est survenue",status:e.status}}}async refreshToken(){return this.isRefreshing||(this.isRefreshing=!0,this.refreshPromise=(async()=>{try{await fetch(`${this.baseUrl}/auth/refresh?use_cookies=true`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({})})}catch(e){throw e}finally{this.isRefreshing=!1,this.refreshPromise=null}})()),this.refreshPromise}async signup(e){return this.request("/auth/signup?use_cookies=true",{method:"POST",body:JSON.stringify(e)})}async login(e){return this.request("/auth/login?use_cookies=true",{method:"POST",body:JSON.stringify(e)})}async me(){return this.request("/auth/me")}async logout(){try{await fetch(`${this.baseUrl}/auth/logout`,{method:"POST",credentials:"include"})}catch{}}async forgotPassword(e){return this.request("/auth/forgot-password",{method:"POST",body:JSON.stringify({email:e})})}async listOrganizations(e){let t=e?`?status=${encodeURIComponent(e)}`:"";return this.request(`/orgs${t}`)}async createOrganization(e){return this.request("/orgs",{method:"POST",body:JSON.stringify(e)})}async getOrganization(e){return this.request(`/orgs/${e}`)}async updateOrganization(e,t){return this.request(`/orgs/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async archiveOrganization(e){await this.request(`/orgs/${e}`,{method:"DELETE"})}async activateOrganization(e){await this.request(`/orgs/${e}/activate`,{method:"POST"})}async getCourses(e,t={}){let r=t.status?`?status=${encodeURIComponent(t.status)}`:"";return this.request(`/courses${r}`,{headers:{"X-Org-ID":e}})}async getCourse(e,t){return this.request(`/courses/${t}`,{headers:{"X-Org-ID":e}})}async createCourse(e,t){return this.request("/courses",{method:"POST",headers:{"X-Org-ID":e},body:JSON.stringify(t)})}async updateCourse(e,t,r){return this.request(`/courses/${t}`,{method:"PATCH",headers:{"X-Org-ID":e},body:JSON.stringify(r)})}async publishCourse(e,t){await this.request(`/courses/${t}/publish`,{method:"POST",headers:{"X-Org-ID":e}})}async unpublishCourse(e,t){await this.request(`/courses/${t}/unpublish`,{method:"POST",headers:{"X-Org-ID":e}})}async archiveCourse(e,t){await this.request(`/courses/${t}`,{method:"DELETE",headers:{"X-Org-ID":e}})}async listModules(e,t){return this.request(`/courses/${t}/modules`,{headers:{"X-Org-ID":e}})}async createModule(e,t,r){let s={title:r.title,module_type:r.module_type};return void 0!==r.content_id&&(s.content_id=r.content_id),void 0!==r.duration_seconds&&(s.duration_seconds=r.duration_seconds),void 0!==r.data&&(s.data=r.data),this.request(`/courses/${t}/modules`,{method:"POST",headers:{"X-Org-ID":e},body:JSON.stringify(s)})}async updateModule(e,t,r){let s={title:r.title,module_type:r.module_type};return void 0!==r.content_id&&(s.content_id=r.content_id),void 0!==r.duration_seconds&&(s.duration_seconds=r.duration_seconds),void 0!==r.data&&(s.data=r.data),this.request(`/courses/modules/${t}`,{method:"PATCH",headers:{"X-Org-ID":e},body:JSON.stringify(s)})}async deleteModule(e,t){await this.request(`/courses/modules/${t}`,{method:"DELETE",headers:{"X-Org-ID":e}})}async reorderModules(e,t,r){await this.request(`/courses/${t}/modules/reorder`,{method:"POST",headers:{"X-Org-ID":e},body:JSON.stringify({module_ids:r})})}async getEnrollments(e,t={}){let r=new URLSearchParams;t.user_id&&r.set("user_id",t.user_id),t.course_id&&r.set("course_id",t.course_id),t.group_id&&r.set("group_id",t.group_id),t.status&&r.set("status",t.status);let s=r.toString()?`?${r.toString()}`:"";return this.request(`/enrollments${s}`,{headers:{"X-Org-ID":e}})}async createEnrollment(e,t){return this.request("/enrollments",{method:"POST",headers:{"X-Org-ID":e},body:JSON.stringify(t)})}async updateEnrollment(e,t,r){return this.request(`/enrollments/${t}`,{method:"PATCH",headers:{"X-Org-ID":e},body:JSON.stringify(r)})}async cancelEnrollment(e,t){await this.request(`/enrollments/${t}`,{method:"DELETE",headers:{"X-Org-ID":e}})}async listGroups(e,t={}){let r=new URLSearchParams;t.course_id&&r.set("course_id",t.course_id);let s=r.toString()?`?${r.toString()}`:"";return this.request(`/enrollments/groups${s}`,{headers:{"X-Org-ID":e}})}async createGroup(e,t){return this.request("/enrollments/groups",{method:"POST",headers:{"X-Org-ID":e},body:JSON.stringify(t)})}async updateGroup(e,t,r){return this.request(`/enrollments/groups/${t}`,{method:"PATCH",headers:{"X-Org-ID":e},body:JSON.stringify(r)})}async deleteGroup(e,t){await this.request(`/enrollments/groups/${t}`,{method:"DELETE",headers:{"X-Org-ID":e}})}async listUsers(e,t={}){let r=new URLSearchParams;t.role&&r.set("role",t.role),t.status&&r.set("status",t.status);let s=r.toString()?`?${r.toString()}`:"";return this.request(`/users${s}`,{headers:{"X-Org-ID":e}})}async createUser(e,t){return this.request("/users",{method:"POST",headers:{"X-Org-ID":e},body:JSON.stringify(t)})}async getUser(e,t){return this.request(`/users/${t}`,{headers:{"X-Org-ID":e}})}async updateUser(e,t,r){return this.request(`/users/${t}`,{method:"PATCH",headers:{"X-Org-ID":e},body:JSON.stringify(r)})}async deactivateUser(e,t){await this.request(`/users/${t}`,{method:"DELETE",headers:{"X-Org-ID":e}})}async activateUser(e,t){await this.request(`/users/${t}/activate`,{method:"POST",headers:{"X-Org-ID":e}})}async getProgress(e,t){return this.request(`/enrollments/${t}/progress`,{headers:{"X-Org-ID":e}})}async startModule(e,t,r){return this.request(`/enrollments/${t}/progress/start`,{method:"POST",headers:{"X-Org-ID":e},body:JSON.stringify({module_id:r})})}async completeModule(e,t,r,s){return this.request(`/enrollments/${t}/progress/complete`,{method:"POST",headers:{"X-Org-ID":e},body:JSON.stringify({module_id:r,score:s})})}async listContents(e){return this.request("/contents",{headers:{"X-Org-ID":e}})}async createContent(e,t){return this.request("/contents",{method:"POST",headers:{"X-Org-ID":e},body:JSON.stringify(t)})}async getContent(e,t){return this.request(`/contents/${t}`,{headers:{"X-Org-ID":e}})}async finalizeContent(e,t,r){return this.request(`/contents/${t}/finalize`,{method:"POST",headers:{"X-Org-ID":e},body:JSON.stringify(r)})}async archiveContent(e,t){await this.request(`/contents/${t}`,{method:"DELETE",headers:{"X-Org-ID":e}})}async getDownloadLink(e,t){return this.request(`/contents/${t}/download`,{headers:{"X-Org-ID":e}})}}let o=new s},1210:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>i,a:()=>u});var s=r(326),o=r(7577),n=r(9341);let a=(0,o.createContext)(void 0);function i({children:e}){let[t,r]=(0,o.useState)(null),[i,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(!0),l=async e=>{try{let t=await n.x.signup(e),s={id:t.user.id,email:t.user.email,role:t.user.role},o={id:t.organization.id,name:t.organization.name,slug:t.organization.slug};r(s),u(o),localStorage.setItem("user",JSON.stringify(s)),localStorage.setItem("organization",JSON.stringify(o))}catch(e){throw console.error("Signup error:",e),e}},c=async e=>{try{await n.x.login(e);let t=await n.x.me(),s={id:t.user.id,email:t.user.email,role:t.user.role},o={id:t.organization.id,name:t.organization.name,slug:t.organization.slug};r(s),u(o),localStorage.setItem("user",JSON.stringify(s)),localStorage.setItem("organization",JSON.stringify(o))}catch(e){throw console.error("Login error:",e),e}},g=async()=>{await n.x.logout(),r(null),u(null),localStorage.removeItem("user"),localStorage.removeItem("organization")};return s.jsx(a.Provider,{value:{user:t,organization:i,isLoading:d,isAuthenticated:!!t,signup:l,login:c,logout:g},children:e})}function u(){let e=(0,o.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5509:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h,metadata:()=>d});var s=r(9510),o=r(8187),n=r.n(o);r(7272);var a=r(8570);let i=(0,a.createProxy)(String.raw`/home/arnaud/project/lms-go/web/components/theme-provider.tsx#ThemeProvider`),u=(0,a.createProxy)(String.raw`/home/arnaud/project/lms-go/web/lib/auth/context.tsx#AuthProvider`);(0,a.createProxy)(String.raw`/home/arnaud/project/lms-go/web/lib/auth/context.tsx#useAuth`);let d={title:"LMS Go",description:"Plateforme LMS moderne inspir\xe9e de Revolut"};function h({children:e}){return s.jsx("html",{lang:"fr",suppressHydrationWarning:!0,children:s.jsx("body",{className:`${n().variable} min-h-screen text-foreground`,children:s.jsx(i,{attribute:"class",defaultTheme:"dark",enableSystem:!0,children:s.jsx(u,{children:e})})})})}},7272:()=>{}};